<!-- Generated by agents-reverse-engineer -->

# web/src/utils

Browser-side utility functions for backend/model configuration, session naming, audio notifications, and directory history persistence.

## Contents

### Configuration

- **[backends.ts](./backends.ts)** — Maps backend types to model/mode options; exports static configurations for Claude (`CLAUDE_MODELS`, `CLAUDE_MODES`) and Codex (`CODEX_MODELS`, `CODEX_MODES`); provides `getModelsForBackend`, `getModesForBackend`, `getDefaultModel`, `getDefaultMode` for dynamic selection; implements `pickIcon(slug, index)` for visual model indicators via substring matching and modulo fallback; exports `toModelOptions(BackendModelInfo[]): ModelOption[]` for runtime model list conversion.

### Session Management

- **[names.ts](./names.ts)** — Generates random two-word session names via `generateSessionName()` (40 adjectives × 40 nouns = 1600 combinations); provides `generateUniqueSessionName(existingNames)` with 100-iteration collision retry using `Math.random()` selection.

### Browser Utilities

- **[notification-sound.ts](./notification-sound.ts)** — Synthesizes two-tone notification chime (E5 @ 659.25 Hz → G5 @ 783.99 Hz) via Web Audio API singleton `AudioContext`; exports `playNotificationSound()` with silent exception handling for unsupported browsers.

- **[recent-dirs.ts](./recent-dirs.ts)** — Manages LRU cache of 5 directory paths in `localStorage` under key `"cc-recent-dirs"`; exports `getRecentDirs(): string[]` (JSON parse with fallback to `[]`) and `addRecentDir(dir)` (dedupe + prepend + `slice(0, 5)` persistence).

## Behavioral Contracts

### Icon Assignment (backends.ts)

`MODEL_ICONS` substring map: `"codex"` → `"\u2733"` (✳), `"max"` → `"\u25A0"` (■), `"mini"` → `"\u26A1"` (⚡)  
Fallback icon cycle: `["\u25C6", "\u25CF", "\u25D5", "\u2726"]` (◆ ● ◕ ✦) via `index % 4`

### Audio Parameters (notification-sound.ts)

First tone: E5 (659.25 Hz), gain 0.3 → 0.001 over 300ms  
Second tone: G5 (783.99 Hz), starts at 150ms offset, gain ramps 0.001 → 0.3 → 0.001 over 500ms total  
Both use `OscillatorNode` type `"sine"`

### Cache Limits (recent-dirs.ts)

Maximum entries: 5 (enforced by `slice(0, 5)`)  
Unique name retries: 100 iterations before fallback (names.ts)

## File Relationships

- `backends.ts` imports `BackendType` from `../types.js` and `BackendModelInfo` from `../api.js` for type constraints on model selection functions.
- `names.ts` is standalone with no imports; consumed by session creation flows in `HomePage.tsx` and `Sidebar.tsx`.
- `notification-sound.ts` is standalone; invoked when new messages arrive in `ws.ts` message handler.
- `recent-dirs.ts` is standalone; consumed by `FolderPicker.tsx` for directory history display.